<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css" />
    <title>Waitlist Signup</title>
    <style>
        #message {
            display: none;
            margin: 10px;
            padding: 10px;
            border-radius: 4px;
            font-weight: bold;
        }

        .navbar-item input.input {
            max-width: 250px;
        }

        @media (max-width: 768px) {
            .mobile-nav-layout {
                flex-direction: column;
                align-items: stretch;
                gap: 10px;
            }

            .mobile-nav-layout>div {
                justify-content: center;
                text-align: center;
            }

            .mobile-form-container {
                justify-content: center !important;
            }
        }
    </style>
</head>


<body>
    <!-- Navbar -->
    <nav role="navigation" aria-label="main navigation"
        style="background-color: #ffffff; padding: 0.75rem 1rem; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); width: 100%; box-sizing: border-box; position: sticky; top: 0; z-index: 1000;"
        class="mobile-nav-layout">
        <div
            style="flex: 0 0 auto; min-width: 0; padding: 0; font-size: clamp(0.8rem, 2.5vw, 1rem); color: #1f2a44; font-weight: 600; font-family: 'Inter', sans-serif;">
            Build your site like this within minutes! <strong style="color: #4f46e5; margin-left: 0.3rem;"><a
                    href="https://discord.gg/Jupfm5zyNf" style="color: #4f46e5; text-decoration: underline;"
                    target="_blank" rel="noopener noreferrer">Join waitlist/Discord</a></strong>
        </div>
        <div style="flex: 0 0 auto; display: flex; justify-content: flex-end; min-width: 0; padding: 0; gap: 6px;"
            class="mobile-form-container">
            <form id="form" style="display: flex; gap: 6px; align-items: center;">
                <input type="email" placeholder="Your Email" name="Email" required
                    style="background-color: #f8fafc; color: #1f2a44; padding: 0.5rem 0.75rem; border-radius: 6px; border: 1px solid #e2e8f0; width: 100%; max-width: 160px; min-width: 120px; font-size: clamp(0.75rem, 2vw, 0.9rem); font-family: 'Inter', sans-serif; transition: border-color 0.3s; box-sizing: border-box;">
                <button type="submit" id="submit-button"
                    style="background-color: #4f46e5; color: #ffffff; border: none; font-weight: 600; padding: 0.5rem 0.75rem; border-radius: 6px; cursor: pointer; font-size: clamp(0.75rem, 2vw, 0.9rem); font-family: 'Inter', sans-serif; transition: background-color 0.3s, transform 0.2s; white-space: nowrap;">Join
                    Waitlist</button>
                <button
                    style="background-color: #6b7280; color: #ffffff; border: none; padding: 0.5rem 0.75rem; border-radius: 6px; cursor: pointer; font-size: clamp(0.75rem, 2vw, 0.9rem); font-family: 'Inter', sans-serif; transition: background-color 0.3s, transform 0.2s; white-space: nowrap;">
                    <a href="https://discord.gg/Jupfm5zyNf"
                        style="color: #ffffff; font-weight: 600; text-decoration: none;" target="_blank"
                        rel="noopener noreferrer">Discord</a>
                </button>
            </form>
        </div>
    </nav>

    <!-- Message area -->
    <div class="container">
        <div id="message"></div>
    </div>
    <iframe src="portfolio.html" style="width: 100%; height:100vh;">Anit</iframe>

    <script>
        const form = document.getElementById("form");
        const submitButton = document.getElementById("submit-button");
        const messageDiv = document.getElementById("message");

        form.addEventListener("submit", async function (e) {
            e.preventDefault();

            messageDiv.textContent = "Submitting...";
            messageDiv.style.display = "block";
            messageDiv.style.backgroundColor = "beige";
            messageDiv.style.color = "black";
            submitButton.disabled = true;
            submitButton.classList.add("is-loading");

            try {
                const formData = new FormData(this);
                const formDataObj = {};

                for (let [key, value] of formData.entries()) {
                    formDataObj[key] = value;
                }

                const email = formDataObj.Email;

                // const checkEmail = `https://cors-anywhere.herokuapp.com/https://isfakemail.com/api/check?url=${email}`;
                // const validCheck = await fetch(checkEmail, {
                //     method: "GET", // GET is default, so this is optional
                //     headers: {
                //         // No special headers needed unless API requires them
                //     },
                // })

                // const checkData = await validCheck.json();
                // console.log(checkData)

                // if (checkData.isDisposable !== true) {
                //     throw new Error("Submission only allowed for temporary email domains");
                //     alert(checkData)
                // }

                const scriptURL =
                    "https://script.google.com/macros/s/AKfycbzjSTsKiwYD3nk8Rv7_8dPcZDJ0QLKsm11xBJL-ktwamVPSTUPtpfqXR3Fr49F-6DGp/exec";

                const response = await fetch(scriptURL, {
                    redirect: "follow",
                    method: "POST",
                    body: JSON.stringify(formDataObj),
                    headers: {
                        "Content-Type": "text/plain;charset=utf-8",
                    },
                });

                const data = await response.json();

                if (data.status === "success") {
                    messageDiv.textContent =
                        data.message || "Joined Waitlist successfully!";
                    messageDiv.style.backgroundColor = "#48c78e";
                    messageDiv.style.color = "white";
                    form.reset();

                } else {
                    throw new Error(data.message || "Submission failed");
                }
            } catch (error) {
                console.error("Error:", error);
                messageDiv.textContent = "Error: " + error.message;
                messageDiv.style.backgroundColor = "#f14668";
                messageDiv.style.color = "white";
            } finally {
                submitButton.disabled = false;
                submitButton.classList.remove("is-loading");

                setTimeout(() => {
                    messageDiv.textContent = "";
                    messageDiv.style.display = "none";
                }, 4000);
            }
        });

        const cancelButton = form.querySelector("button.is-danger");
        cancelButton.addEventListener("click", function () {
            form.reset();
            messageDiv.style.display = "none";
        });
    </script>
</body>

</html>